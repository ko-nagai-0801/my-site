/* app/globals.css */
@import "tailwindcss";

@import "../styles/tokens.css";
@import "../styles/base.css";
@import "../styles/components.css";
@import "../styles/typography.css";
@import "../styles/pretty-code.css";

@plugin "@tailwindcss/typography";



/* Spotlight (pointer: fine のときだけ効かせる) */
@media (pointer: fine) {
  .kns-spotlight {
    position: relative;
    overflow: hidden;
  }

  .kns-spotlight::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    opacity: 0;
    transition: opacity 200ms ease;
    background: radial-gradient(
      600px circle at var(--spotlight-x, 50%) var(--spotlight-y, 50%),
      rgba(255, 255, 255, 0.10),
      rgba(255, 255, 255, 0.04) 35%,
      transparent 60%
    );
  }

  .kns-spotlight:hover::before {
    opacity: 1;
  }
}

@media (prefers-reduced-motion: reduce) {
  .kns-spotlight::before {
    transition: none;
  }
}

/* Cursor Stalker */
@media (pointer: fine) {
  .kns-cursor-stalker {
    position: fixed;
    left: 0;
    top: 0;
    z-index: 9999;
    width: 34px;
    height: 34px;
    border-radius: 9999px;
    pointer-events: none;
    opacity: 0;
    transform: translate3d(0, 0, 0) translate(-50%, -50%);
    transition: opacity 180ms ease;
    will-change: transform, opacity;

    /* “薄い光” */
    background: radial-gradient(
      circle,
      rgba(255, 255, 255, 0.12),
      rgba(255, 255, 255, 0.06) 35%,
      rgba(255, 255, 255, 0.00) 70%
    );

    /* ほんの少しだけ“凝った感” */
    filter: blur(0.2px);
    mix-blend-mode: screen;
  }

  .kns-cursor-stalker.kns-cursor--click {
    animation: kns-cursor-click 220ms ease;
  }

  @keyframes kns-cursor-click {
    0%   { transform: translate3d(var(--x, 0), var(--y, 0), 0) translate(-50%, -50%) scale(1); }
    40%  { transform: translate3d(var(--x, 0), var(--y, 0), 0) translate(-50%, -50%) scale(0.86); }
    100% { transform: translate3d(var(--x, 0), var(--y, 0), 0) translate(-50%, -50%) scale(1); }
  }
}

@media (prefers-reduced-motion: reduce) {
  .kns-cursor-stalker {
    display: none;
  }
}

/* Ripple (CTA only by class) */
.kns-ripple-host {
  position: relative;
  overflow: hidden;
}

.kns-ripple-host::after {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 0;
  opacity: 0;
  background: radial-gradient(
    600px circle at var(--ripple-x, 50%) var(--ripple-y, 50%),
    rgba(255, 255, 255, 0.22),
    rgba(255, 255, 255, 0.10) 28%,
    rgba(255, 255, 255, 0.00) 60%
  );
}

.kns-ripple-host.kns-ripple::after {
  animation: kns-ripple 650ms ease-out;
}

@keyframes kns-ripple {
  0%   { opacity: 0.00; transform: scale(0.9); }
  18%  { opacity: 0.38; transform: scale(1.0); }
  100% { opacity: 0.00; transform: scale(1.25); }
}

@media (prefers-reduced-motion: reduce) {
  .kns-ripple-host::after {
    animation: none !important;
  }
}

/* Ripple (CTA only by class) */
.kns-ripple-host {
  position: relative;
  overflow: hidden;
}

.kns-ripple-host::after {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 0;
  opacity: 0;
  background: radial-gradient(
    600px circle at var(--ripple-x, 50%) var(--ripple-y, 50%),
    rgba(255, 255, 255, 0.22),
    rgba(255, 255, 255, 0.10) 28%,
    rgba(255, 255, 255, 0.00) 60%
  );
}

.kns-ripple-host.kns-ripple::after {
  animation: kns-ripple 650ms ease-out;
}

@keyframes kns-ripple {
  0%   { opacity: 0.00; transform: scale(0.9); }
  18%  { opacity: 0.38; transform: scale(1.0); }
  100% { opacity: 0.00; transform: scale(1.25); }
}

@media (prefers-reduced-motion: reduce) {
  .kns-ripple-host::after {
    animation: none !important;
  }
}

/* Animated underline for nav-link */
.nav-link {
  background-image: linear-gradient(currentColor, currentColor);
  background-repeat: no-repeat;
  background-position: 0 100%;
  background-size: 0% 1px;
  transition: background-size 200ms ease;
}

.nav-link:hover,
.nav-link:focus-visible {
  background-size: 100% 1px;
}

@media (prefers-reduced-motion: reduce) {
  .nav-link {
    transition: none;
  }
}
